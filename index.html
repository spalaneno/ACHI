<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwY2c8vdGMHbXLdrjKXrDTDHNbWhO68EaiVlK3GcGOXvNilFcYMQEoSEhgbbd456nre/exec";

function login() {
  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value.trim();

  fetch(API_URL + "?username=" + encodeURIComponent(u) + "&password=" + encodeURIComponent(p))
    .then(function(res) {
      return res.json();
    })
    .then(function(data) {
      if (data.status === "success") {
        localStorage.setItem("achi_login", "true");
        localStorage.setItem("achi_user", data.username);
        localStorage.setItem("achi_role", data.role);
        localStorage.setItem("achi_kapal", data.kapal);
        localStorage.setItem("achi_nama", data.nama);

        alert("Login: " + data.nama + " (" + data.role + ")");
        window.location.href = "dashboard.html";
      } else {
        alert("Login gagal");
      }
    })
    .catch(function() {
      alert("Koneksi gagal");
    });
}
</script>
