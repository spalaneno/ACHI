<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Anfrakan Kapten</title>
</head>
<body>

<h2>Form Anfrakan Kapal</h2>

<p id="info"></p>

<input type="text" id="keterangan" placeholder="Keterangan anfrakan"><br><br>
<input type="number" id="nominal" placeholder="Nominal"><br><br>
<script>
alert("SCRIPT KAPTEN TERLOAD");
</script>

<button type="button" onclick="kirimAnfrakan()">Kirim Anfrakan</button>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycby76i2SSOdpkbMTkzf_qnXK6LgyIfSmELhqcgqshhAFYgaanwQQVktBpqN0-VQrP_Md/exec";

document.getElementById("info").innerText =
  localStorage.getItem("achi_nama") + " - " +
  localStorage.getItem("achi_kapal");

function kirimAnfrakan() {
  const keterangan = document.getElementById("keterangan").value;
  const nominal = document.getElementById("nominal").value;

 fetch(API_URL, {
  method: "POST",
  body: JSON.stringify({
    action: "addAnfrakanKapal",
    username: localStorage.getItem("achi_user"),
    kapal: localStorage.getItem("achi_kapal"),
    keterangan: document.getElementById("keterangan").value,
    nominal: document.getElementById("nominal").value
  })
})
.then(res => res.json())
.then(r => {
  alert(JSON.stringify(r));
})
.catch(err => {
  alert("ERROR FETCH: " + err);
});

  })
  .catch(() => alert("Koneksi gagal"));
}
</script>

</body>
</html>
