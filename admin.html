<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>ADMIN – APPROVAL ANFRAKAN</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
}

header {
  padding: 20px;
  background: linear-gradient(90deg, #b30000, #000);
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

#list {
  padding: 20px;
}

.card {
  background: #1e1e1e;
  padding: 15px;
  margin-bottom: 15px;
  border-left: 5px solid #b30000;
}

button {
  margin-top: 10px;
  padding: 8px 14px;
  background: #b30000;
  border: none;
  color: white;
  cursor: pointer;
}

button:hover {
  background: #ff0000;
}
</style>
</head>

<body>

<header>ADMIN – APPROVAL ANFRAKAN</header>
<div id="list">Memuat data...</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyB4pNGh2_PJ448-OeiC8DYwR6NyyXjrNw0KzYsctq9BAP8G7ILh-HpGW629u6qdehK/exec";
// ↑ URL DARI ANDA – JANGAN DIUBAH

fetch(API_URL + "?action=getPendingAnfrakan")
  .then(res => res.json())
  .then(res => {
    if (!res.data || res.data.length === 0) {
      document.getElementById("list").innerHTML =
        "<p>Tidak ada anfrakan pending</p>";
      return;
    }

    let html = "";
    res.data.forEach(item => {
      html += `
        <div class="card">
          <b>${item.kapal}</b><br>
          Keterangan: ${item.keterangan}<br>
          Nominal: Rp ${item.nominal}<br>
          User: ${item.username}<br>
          <button onclick="approve(${item.row})">APPROVE</button>
        </div>
      `;
    });

    document.getElementById("list").innerHTML = html;
  })
  .catch(() => {
    document.getElementById("list").innerHTML = "Gagal memuat data";
  });

function approve(row) {
  fetch(API_URL + "?action=approve&row=" + row + "&admin=ADMIN")
    .then(res => res.json())
    .then(() => location.reload());
}
</script>

</body>
</html>
